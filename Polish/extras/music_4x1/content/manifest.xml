<?xml version="1.0" encoding="utf-8"?>
<Gadget version="1" frameRate="0" resDensity="480" extraResourcesDensity="480">
    <Group x="#view_width/2-482" y="#view_height/2-125" w="963" h="258" layered="true">
        <MusicControl x="0" y="0" autoShow="true" systemPlayer="true" frameRate="0">
            <Image x="1" y="1" src="music_bg.png" w="961" h="256"/>
			<Group x="0" y="0" w="962" h="258" layered="true">
                <Image name="music_album_cover" x="963" y="128" w="963" h="963" align="right" alignV="center" scale="20"/>
                <Image x="0" y="0" w="963" h="258" src="music_mask.9.png" xfermode="dst_in"/>
            </Group>
            <Button name="music_prev" x="47" y="325" w="0" h="0" visibility="false">
            </Button>
            <Button name="music_next" x="331" y="325" w="0" h="0" visibility="false">
            </Button>
            <Button name="music_play" x="167" y="304" w="0" h="0" visibility="false">
            </Button>
            <Button name="music_pause" x="167" y="304" w="0" h="0" visibility="false">
            </Button>
        </MusicControl>
        <MusicControl name="music_control" x="0" y="0" autoShow="true" enableProgress="true" systemPlayer="true" frameRate="0">
            <Group x="0" y="0" w="963" h="258" layered="true">
                <Image name="music_album_cover" x="257" y="128" w="702-180" h="702-180" align="center" alignV="center"/>
                <Image x="0" y="0" w="963" h="258" src="album_mask.9.png" xfermode="dst_in"/>
            </Group>
            <Image x="0" y="0" w="963" h="258" src="album_overlay.9.png"/>
            <Text x="722" y="20" w="400" marqueeSpeed="30" size="32" bold="true" color="#ffffffff" align="center" format="%s" paras="@music_control.title"/>
            <Text x="722" y="63" w="400" marqueeSpeed="30" size="30" color="#99ffffff" align="center" format="%s" paras="@music_control.artist"/>
            <Button name="music_prev" x="539" y="137" w="100" h="100">
                <Normal>
                    <Circle x="591" y="185" r="38" strokeColor="#80ffffff" fillColor="#00000000" weight="1" strokeAlign="inner"/>
                </Normal>
                <Pressed>
                    <Circle x="591" y="185" r="38" strokeColor="#80ffffff" fillColor="#26ffffff" weight="1" strokeAlign="inner"/>
                </Pressed>
            </Button>
            <Image x="591" y="185" align="center" alignV="center" src="music_pre.png"/>
            <Button name="music_next" x="805" y="137" w="100" h="100">
                <Normal>
                    <Circle x="855" y="185" r="38" strokeColor="#80ffffff" fillColor="#00000000" weight="1" strokeAlign="inner"/>
                </Normal>
                <Pressed>
                    <Circle x="855" y="185" r="38" strokeColor="#80ffffff" fillColor="#26ffffff" weight="1" strokeAlign="inner"/>
                </Pressed>
            </Button>
            <Image x="855" y="185" align="center" alignV="center" src="music_next.png"/>
            <Button name="music_play" x="652" y="114" w="140" h="140">
                <Normal>
                    <Circle x="723" y="184" r="56" strokeColor="#80ffffff" fillColor="#00000000" weight="1" strokeAlign="inner"/>
                </Normal>
                <Pressed>
                    <Circle x="723" y="184" r="56" strokeColor="#80ffffff" fillColor="#26ffffff" weight="1" strokeAlign="inner"/>
                </Pressed>
                <Image x="696" y="150" src="music_play.png"/>
            </Button>
            <Button name="music_pause" x="652" y="114" w="140" h="140">
                <Normal>
                    <Circle x="723" y="184" r="56" strokeColor="#80ffffff" fillColor="#00000000" weight="1" strokeAlign="inner"/>
                </Normal>
                <Pressed>
                    <Circle x="723" y="184" r="56" strokeColor="#80ffffff" fillColor="#26ffffff" weight="1" strokeAlign="inner"/>
                </Pressed>
                <Image x="710" y="164" src="music_pause.png"/>
            </Button>

            <Var name="progress" expression="ifelse(#music_control.music_duration,#music_control.music_position/#music_control.music_duration,0)" />
            <Group x="653" y="114" w="140" h="140" layered="true">
                <Image x="0" y="0" src="play_progress.png"/>
                <Arc x="70" y="70" w="140" h="140" startAngle="-90" sweep="-360*(1-#progress)" close="true" fillColor="#ff000000" xfermode="clear"/>
            </Group>
        </MusicControl>
        <Image x="0" y="0" w="963" h="258" src="music_mask.9.png" xfermode="dst_in"/>
        <Rectangle w="963" h="258" cornerRadius="25,25" strokeColor="#1EFFFFFF" weight="1" strokeAlign="inner"/>
    </Group>

    <Button x="#view_width/2-482" y="#view_height/2-257" w="520" h="513">
        <Triggers>
            <Trigger action="up">
                <IntentCommand action="android.intent.action.MAIN" package="com.miui.player" class="com.miui.player.ui.MusicBrowserActivity" condition="isnull(@music_control.title)"/>
                <IntentCommand action="com.miui.player.PLAYBACK_VIEWER" category="android.intent.category.DEFAULT" condition="not(isnull(@music_control.title))"/>
            </Trigger>
        </Triggers>
    </Button>
</Gadget>
